---
layout: post
title: 正则表达式语法以及test,exec,match方法的使用
categories: [blog ]
tags: [Tool, ]
description: 正则表达式语法以及test,exec,match方法的使用
---

### 正则表达式基本语法

两个特殊的符号'^'和'$'。他们的作用是分别指出一个字符串的开始和结束。例子如下：

>"^The"：表示所有以"The"开始的字符串（"There"，"The cat"等）；  
>"of despair$"：表示所以以"of despair"结尾的字符串；  
>"^abc$"：表示开始和结尾都是"abc"的字符串——呵呵，只有"abc"自己了；  
>"notice"：表示任何包含"notice"的字符串。


象最后那个例子，如果你不使用两个特殊字符，你就在表示要查找的串在被查找串的任意部分——你并不把它定位在某一个顶端。

其它还有'*'，'+'和'?'这三个符号，表示一个或一序列字符重复出现的次数。它们分别表示“没有或更多”，“一次或更多”还有“没有或一次”。下面是几个例子：

>"ab*"：表示一个字符串有一个a后面跟着零个或若干个b。（"a", "ab", "abbb",……）；  
>"ab+"：表示一个字符串有一个a后面跟着至少一个b或者更多；  
>"ab?"：表示一个字符串有一个a后面跟着零个或者一个b；  
>"a?b+$"：表示在字符串的末尾有零个或一个a跟着一个或几个b。

你也可以使用范围，用大括号括起，用以表示重复次数的范围。

>"ab{2}"：表示一个字符串有一个a跟着2个b（"abb"）；  
>"ab{2,}"：表示一个字符串有一个a跟着至少2个b；  
>"ab{3,5}"：表示一个字符串有一个a跟着3到5个b。

请注意，你必须指定范围的下限（如："{0,2}"而不是"{,2}"）。还有，你可能注意到了，'*'，'+'和'?'相当于"{0,}"，"{1,}"和"{0,1}"。还有一个'¦'，表示“或”操作：

>"hi¦hello"：表示一个字符串里有"hi"或者"hello"；  
>"(b¦cd)ef"：表示"bef"或"cdef"；  
>"(a¦b)*c"：表示一串"a""b"混合的字符串后面跟一个"c"；

'.'可以替代任何字符：

>"a.[0-9]"：表示一个字符串有一个"a"后面跟着一个任意字符和一个数字；  
>"^.{3}$"：表示有任意三个字符的字符串（长度为3个字符）；

方括号表示某些字符允许在一个字符串中的某一特定位置出现：

>"[ab]"：表示一个字符串有一个"a"或"b"（相当于"a¦b"）；  
>"[a-d]"：表示一个字符串包含小写的'a'到'd'中的一个（相当于"a¦b¦c¦d"或者"[abcd]"）；  
>"^[a-zA-Z]"：表示一个以字母开头的字符串；  
>"[0-9]%"：表示一个百分号前有一位的数字；  
>",[a-zA-Z0-9]$"：表示一个字符串以一个逗号后面跟着一个字母或数字结束。

你也可以在方括号里用'^'表示不希望出现的字符，'^'应在方括号里的第一位。（如："%[^a-zA-Z]%"表
示两个百分号中不应该出现字母）。

为了逐字表达，你必须在"^.$()¦*+?{\"这些字符前加上转移字符'\'。

请注意在方括号中，不需要转义字符。

#### 正则表达式中test,exec,match方法的区别说明

**test** 

test 返回 Boolean，查找对应的字符串中是否存在模式。

	var str = "1a1b1c";
	var reg = new RegExp("1.", "");
	alert(reg.test(str)); // true

**exec** 

exec 查找并返回当前的匹配结果，并以数组的形式返回。

	var str = "1a1b1c";
	var reg = new RegExp("1.", "");
	var arr = reg.exec(str);

如果不存在模式，则 arr 为 null，否则 arr 总是一个长度为 1 的数组，其值就是当前匹配项。arr 还有三个属性：index 当前匹配项的位置；lastIndex 当前匹配项结束的位置（index + 当前匹配项的长度）；input 如上示例中 input 就是 str。

exec 方法受参数 g 的影响。若指定了 g，则下次调用 exec 时，会从上个匹配的 lastIndex 开始查找。

	var str = "1a1b1c";
	var reg = new RegExp("1.", "");
	alert(reg.exec(str)[0]);
	alert(reg.exec(str)[0]);

上述两个输出都是 1a。现在再看看指定参数 g：

	var str = "1a1b1c";
	var reg = new RegExp("1.", "g");
	alert(reg.exec(str)[0]);
	alert(reg.exec(str)[0]);

上述第一个输出 1a，第二个输出 1b。

#### match

match 是 String 对象的一个方法。

	var str = "1a1b1c";
	var reg = new RegExp("1.", "");
	alert(str.match(reg));

match 这个方法有点像 exec，但：exec 是 RegExp 对象的方法；math 是 String 对象的方法。二者还有一个不同点，就是对参数 g 的解释。如果指定了参数 g，那么 match 一次返回所有的结果。

	var str = "1a1b1c";
	var reg = new RegExp("1.", "g");
	alert(str.match(reg));
	//alert(str.match(reg)); // 此句同上句的结果是一样的

此结果为一个数组，有三个元素，分别是：1a、1b、1c。

正则表达式中经常用到Match和Test这两个函数,当然还有Exec. 下面代码实例来区分它们之间的不同吧.

> Match Example 

	var str = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
	var regexp = /[A-E]/gi;
	var rs = str.match(regexp);
	//rs= Array('A', 'B', 'C', 'D', 'E', 'a', 'b', 'c', 'd', 'e');

> Test Example 

	var str = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
	var regexp = /[A-E]/gi;
	var rs = regexp.test(str);
	// rs = true; boolean

> Exc Example 

	var str = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
	var regexp = /[A-E]/gi;
	var rs;
	while ((rs = regexp.exec(str)) != null)
	{
	    document.write(rs);
	    document.write(regexp.lastIndex);
	    document.write("<br />");
	}

	OUTPUT
	---------------------------------
	A    1
	B   2
	C   3
	D   4
	E   5
	a   27
	b   28
	c   29
	d   30
	e   31

> Another   Exc Example

	var regexp = /ab*/g;
	var str = "abbcdefabh";
	var rs;
	while ((rs = regexp.exec(str)) != null)
	{
	    document.write(rs);
	    document.write(regexp.lastIndex);
	    document.write("<br />");
	}

	OUTPUT
	---------------------------------
	abb   3
	ab     9



正则表达式验证控制文本框的输入字符类型

只能输入数字和英文的： 

	<input onkeyup="value=value.replace(/[\W]/g,'') " onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\d]/g,''))" ID="Text1" NAME="Text1">

只能输入数字的： 

	<input onkeyup="value=value.replace(/[^\d]/g,'') " onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\d]/g,''))" ID="Text2" NAME="Text2">

只能输入全角的：
 
	<input onkeyup="value=value.replace(/[^\uFF00-\uFFFF]/g,'')" onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\uFF00-\uFFFF]/g,''))" ID="Text3" NAME="Text3">

只能输入汉字的： 

	<input onkeyup="value=value.replace(/[^\u4E00-\u9FA5]/g,'')" onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[^\u4E00-\u9FA5]/g,''))" ID="Text4" NAME="Text4">

#### 正则表达式的应用实例通俗说明

	//校验是否全由数字组成

	/^[0-9]{1,20}$/

> ^ 表示打头的字符要匹配紧跟^后面的规则  
> $ 表示打头的字符要匹配紧靠$前面的规则  
> [ ] 中的内容是可选字符集  
> [0-9] 表示要求字符范围在0-9之间  
> {1,20}表示数字字符串长度合法为1到20，即为[0-9]中的字符出现次数的范围是1到20次。

/^ 和 $/成对使用应该是表示要求整个字符串完全匹配定义的规则，而不是只匹配字符串中的一个子串。

	//校验登录名：只能输入5-20个以字母开头、可带数字、“_”、“.”的字串

	/^[a-zA-Z]{1}([a-zA-Z0-9]|[._]){4,19}$/

 

> ^[a-zA-Z]{1} 表示第一个字符要求是字母。  
> ([a-zA-Z0-9]|[.\_]){4,19}表示从第二位开始（因为它紧跟在上个表达式后面）的一个长度为4到9位的字符串，它要求是由大小写字母、数字或者特殊字符集[._]组成。  

	//校验用户姓名：只能输入1-30个以字母开头的字串

	/^[a-zA-Z]{1,30}$/


	//校验密码：只能输入6-20个字母、数字、下划线

	/^(\w){6,20}$/

 

> \w：用于匹配字母，数字或下划线字符  

	//校验普通电话、传真号码：可以“+”或数字开头，可含有“-” 和 “ ”

	/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,12})+$/

> \d：用于匹配从0到9的数字；  

“?”元字符规定其前导对象必须在目标对象中连续出现零次或一次可以匹配的字符串如：+123 -999 999 ； +123-999 999 ；123 999 999 ；+123 999999等

	//校验URL

	/^http[s]{0,1}:\/\/.+$/ 或 /^http[s]{0,1}:\/\/.{1,n}$/ (表示url串的长度为length(“https://”) + n )

 

> \ / ：表示字符“/”  
> . 表示所有字符的集

\+ 等同于{1,}，就是1到正无穷吧。

	//校验纯中文字符

	/^[\u4E00-\u9FA5]+$/

> [\u4E00-\u9FA5] ：估计是中文字符集的范围吧  

以上表达式均在下面的javascript中测试通过

	<html>
	<script language="JavaScript">
	<!--
	function regx(r,s)
	{
	   if (r == null || r == ""){
	          return false;
	   }
	   var patrn= new RegExp(r);
	   if (patrn.exec(s))
	          return true
	   return false
	}
	-->
	</script>
	<body>
	<form>
		规则表达式 ： <input type="input" name="regxStr" value="" > (填写/ /之间的表达式)
		<br>
		校验字符串 ： <input type="input" name="str" value="" >
		<input type="button" name="match" value="匹配" onClick="alert(regx(regxStr.value,str.value));">
	</form>
	</body>
	</html>

正則表達式應用

	"^\d+$"　　//非负整数（正整数 + 0） 
	"^[0-9]*[1-9][0-9]*$"　　//正整数 
	"^((-\d+)|(0+))$"　　//非正整数（负整数 + 0） 
	"^-[0-9]*[1-9][0-9]*$"　　//负整数 
	"^-?\d+$"　　　　//整数 
	"^\d+(\.\d+)?$"　　//非负浮点数（正浮点数 + 0） 
	"^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$"　　//正浮点数 
	"^((-\d+(\.\d+)?)|(0+(\.0+)?))$"　　//非正浮点数（负浮点数 + 0） 
	"^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$"　　//负浮点数 
	"^(-?\d+)(\.\d+)?$"　　//浮点数 
	"^[A-Za-z]+$"　　//由26个英文字母组成的字符串 
	"^[A-Z]+$"　　//由26个英文字母的大写组成的字符串 
	"^[a-z]+$"　　//由26个英文字母的小写组成的字符串 
	"^[A-Za-z0-9]+$"　　//由数字和26个英文字母组成的字符串 
	"^\w+$"　　//由数字、26个英文字母或者下划线组成的字符串 
	"^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$"　　　　//email地址 
	"^[a-zA-z]+://(\w+(-\w+)*)(\.(\w+(-\w+)*))*(\?\S*)?$"　　//url
	/^(d{2}|d{4})-((0([1-9]{1}))|(1[1|2]))-(([0-2]([1-9]{1}))|(3[0|1]))$/   //  年-月-日
	/^((0([1-9]{1}))|(1[1|2]))/(([0-2]([1-9]{1}))|(3[0|1]))/(d{2}|d{4})$/   // 月/日/年
	"^([w-.]+)@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.)|(([w-]+.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(]?)$"   //Emil
	"(d+-)?(d{4}-?d{7}|d{3}-?d{8}|^d{7,8})(-d+)?"     //电话号码
	"^(d{1,2}|1dd|2[0-4]d|25[0-5]).(d{1,2}|1dd|2[0-4]d|25[0-5]).(d{1,2}|1dd|2[0-4]d|25[0-5]).(d{1,2}|1dd|2[0-4]d|25[0-5])$"   //IP地址
	^([0-9A-F]{2})(-[0-9A-F]{2}){5}$   //MAC地址的正则表达式
	^[-+]?\d+(\.\d+)?$  //值类型正则表达式
	/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/;
	//var regName=/^([\u4E00-\u9FA5]|[\uFE30-\uFFA0]|[a-z])*$/gi;
	/(^\d*$)/; // 全为数字
	/^[a-z|A-Z]+$/;// 全部为英文
	/[a-z\d\s\u4e00-\u9df5]/;// 全部为标点符号
	var symbolRule = new RegExp(".*(`|~|%|!|@|\\+|#|\\[|\\]|<|>|《|》|\/|\\^|=|\\?|~|！|:|；|;|：|·|\\$|￥|【|】|…|&|‘|“|”|\"|？|\\*|\\(|\\)|{|}|（|）|、|\\\\|\\|)+"); // 标点符号
	/\d{8}/;// 连续8个数字

#### javascript正则表达式检验

	//校验是否全由数字组成
	function isDigit(s)
	{
		var patrn=/^[0-9]{1,20}$/;
		if (!patrn.exec(s)) return false
		return true
	}


	//校验登录名：只能输入5-20个以字母开头、可带数字、“_”、“.”的字串
	function isRegisterUserName(s)
	{
		var patrn=/^[a-zA-Z]{1}([a-zA-Z0-9]|[._]){4,19}$/;
		if (!patrn.exec(s)) return false
		return true
	}


	//校验用户姓名：只能输入1-30个以字母开头的字串
	function isTrueName(s)
	{
		var patrn=/^[a-zA-Z]{1,30}$/;
		if (!patrn.exec(s)) return false
		return true
	}


	//校验密码：只能输入6-20个字母、数字、下划线
	function isPasswd(s)
	{
		var patrn=/^(\w){6,20}$/;
		if (!patrn.exec(s)) return false
		return true
	}


	//校验普通电话、传真号码：可以“+”开头，除数字外，可含有“-”
	function isTel(s)
	{
		//var patrn=/^[+]{0,1}(\d){1,3}[ ]?([-]?(\d){1,12})+$/;
		var patrn=/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,12})+$/;
		if (!patrn.exec(s)) return false
		return true
	}


	//校验手机号码：必须以数字开头，除数字外，可含有“-”
	function isMobil(s)
	{
		var patrn=/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,12})+$/;
		if (!patrn.exec(s)) return false
		return true
	}


	//校验邮政编码
	function isPostalCode(s)
	{
		//var patrn=/^[a-zA-Z0-9]{3,12}$/;
		var patrn=/^[a-zA-Z0-9 ]{3,12}$/;
		if (!patrn.exec(s)) return false
		return true
	}


	//校验搜索关键字
	function isSearch(s)
	{
		var patrn=/^[^`~!@#$%^&*()+=|\\\][\]\{\}:;\'\,.<>/?]{1}[^`~!@$%^&()+=|\\\][\]\{\}:;\'\,.<>?]{0,19}$/;
		if (!patrn.exec(s)) return false
		return true
	}
	function isIP(s) //by zergling
	{
		var patrn=/^[0-9.]{1,20}$/;
		if (!patrn.exec(s)) return false
		return true
	}
